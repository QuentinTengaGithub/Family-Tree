{"ast":null,"code":"import AddMember from './AddMember.vue';\nimport { Cropper } from 'vue-advanced-cropper';\nimport 'vue-advanced-cropper/dist/style.css';\nexport default {\n  state: {\n    members: []\n  },\n  components: {\n    AddMember,\n    VueCropper: Cropper\n  },\n  data() {\n    return {\n      showAddMember: false,\n      relationship: '',\n      ageSortOrder: 'asc',\n      nameSortOrder: 'asc',\n      hoveredIcon: '',\n      editingMember: '',\n      editingField: '',\n      originalName: '',\n      editingName: '',\n      memberAge: null,\n      cropperVisible: false,\n      currentMember: null,\n      currentImage: null,\n      fileInputs: {}\n    };\n  },\n  computed: {\n    members() {\n      return this.$store.state.members;\n    },\n    darkMode() {\n      return this.$store.state.darkMode;\n    }\n  },\n  watch: {\n    members: {\n      handler(members) {\n        (members || []).forEach(member => {\n          member.toggleRelationship = false;\n        });\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    formatBirthday(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      const day = date.getDate();\n      const year = date.getFullYear();\n      const monthNames = [\"Jan.\", \"Feb.\", \"Mar.\", \"Apr.\", \"May\", \"Jun.\", \"Jul.\", \"Aug.\", \"Sep.\", \"Oct.\", \"Nov.\", \"Dec.\"];\n      const month = monthNames[date.getMonth()];\n      return `${day} ${month} ${year}`;\n    },\n    sortMembersByName() {\n      if (this.nameSortOrder === 'asc') {\n        this.members.sort((a, b) => a.name.localeCompare(b.name));\n        this.nameSortOrder = 'desc';\n      } else {\n        this.members.sort((a, b) => b.name.localeCompare(a.name));\n        this.nameSortOrder = 'asc';\n      }\n    },\n    sortMembersByAge() {\n      if (this.ageSortOrder === 'asc') {\n        this.members.sort((a, b) => a.age - b.age);\n        this.ageSortOrder = 'desc';\n      } else {\n        this.members.sort((a, b) => b.age - a.age);\n        this.ageSortOrder = 'asc';\n      }\n    },\n    confirmDeleteMember(member) {\n      this.memberToDelete = member;\n      if (confirm(\"Êtes-vous sûr de vouloir supprimer ce membre ?\")) {\n        this.deleteMember(this.memberToDelete);\n      } else {\n        // Si l'utilisateur clique sur \"NON\", ne faites rien\n        // Vous pouvez également ajouter un message ou une action supplémentaire ici si nécessaire\n      }\n    },\n    deleteMember(member) {\n      this.$store.dispatch('deleteMember', member.name);\n    },\n    handleCaseMarried(member) {\n      this.relationship = \"married\";\n      member.toggleRelationship = true;\n    },\n    handleCaseSiblings(member) {\n      this.relationship = \"siblings\";\n      member.toggleRelationship = true;\n    },\n    handleCaseChildren(member) {\n      this.relationship = \"children\";\n      member.toggleRelationship = true;\n    },\n    filteredMembersExceptCurrent(index) {\n      const currentMember = this.members[index];\n      const marriedMemberName = currentMember.married;\n      const childrenNames = new Set(currentMember.children || []);\n      const parentNames = new Set();\n      this.members.forEach(m => {\n        if (m.children && m.children.includes(currentMember.name)) {\n          parentNames.add(m.name);\n        }\n      });\n      switch (this.relationship) {\n        case 'married':\n          return this.members.filter(member => {\n            return member.name !== currentMember.name && member.name !== marriedMemberName && !currentMember.siblings.includes(member.name) && !childrenNames.has(member.name) && !parentNames.has(member.name);\n          });\n        case 'siblings':\n          var siblingsMemberNames = currentMember.siblings;\n          return this.members.filter(member => {\n            return member.name !== currentMember.name && member.name !== marriedMemberName && !childrenNames.has(member.name) && !parentNames.has(member.name) && !siblingsMemberNames.includes(member.name);\n          });\n        case 'children':\n          var childrenMemberNames = currentMember.children;\n          return this.members.filter(member => {\n            return member.name !== currentMember.name && member.name !== marriedMemberName && !currentMember.siblings.includes(member.name) && !parentNames.has(member.name) && !childrenMemberNames.includes(member.name);\n          });\n      }\n    },\n    setRelation(member, selectedMember, event) {\n      console.log(\"event : \" + event);\n      const selectedInputId = this.relationship;\n      switch (selectedInputId) {\n        case 'married':\n          this.$store.dispatch('updateMember', {\n            ...member,\n            married: selectedMember.name\n          });\n          this.$store.dispatch('updateMember', {\n            ...selectedMember,\n            married: member.name\n          });\n          break;\n        case 'siblings':\n          this.$store.dispatch('setSiblings', {\n            member: member,\n            selectedMember: selectedMember\n          });\n          break;\n        case 'children':\n          this.$store.dispatch('updateMember', {\n            ...member,\n            children: [...member.children, selectedMember.name]\n          });\n          break;\n        default:\n          console.error('Type de relation non valide');\n          return;\n      }\n    },\n    cancelRelationshipChoice(member) {\n      member.toggleRelationship = false;\n    },\n    unsetMarried(member) {\n      const partner = this.members.find(m => m.name === member.married);\n      this.$store.dispatch('updateMember', {\n        ...member,\n        married: ''\n      });\n      if (partner) {\n        this.$store.dispatch('updateMember', {\n          ...partner,\n          married: ''\n        });\n      }\n    },\n    unsetSibling(member, siblingName) {\n      this.$store.dispatch('unsetSibling', {\n        member,\n        siblingName\n      });\n    },\n    unsetChildren(member, childName) {\n      this.$store.dispatch('unsetChildren', {\n        member,\n        childName\n      });\n    },\n    editMemberPhoto(member) {\n      this.editingMember = member.name;\n      this.editingField = 'image';\n      console.log(member);\n    },\n    editMemberBirthday(member) {\n      this.editingMember = member.name;\n      this.editingField = 'birthday';\n    },\n    editMemberName(member) {\n      this.originalName = member.name;\n      this.editingName = member.name;\n      this.editingMember = member.name;\n      this.editingField = 'name';\n    },\n    triggerFileInput(member) {\n      this.fileInputs[member.name].click();\n    },\n    onFileChange(e, member) {\n      const file = e.target.files[0];\n      if (file) {\n        const url = URL.createObjectURL(file);\n        member.image = url;\n      }\n    },\n    openCropper(member) {\n      this.currentMember = member;\n      this.currentImage = member.image;\n      this.cropperVisible = true;\n    },\n    applyCrop() {\n      if (!this.currentMember) return;\n      const result = this.$refs.cropper.getResult();\n      const sourceCanvas = result?.canvas || (typeof result.getCanvas === 'function' ? result.getCanvas() : null);\n      if (!sourceCanvas) {\n        console.error('Aucun canvas trouvé pour le crop');\n        return;\n      }\n      const MAX_WIDTH = 300; // Max width for the final image\n      const MAX_HEIGHT = 300; // Max height for the final image\n\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      canvas.width = MAX_WIDTH;\n      canvas.height = MAX_HEIGHT;\n      ctx.drawImage(sourceCanvas, 0, 0, MAX_WIDTH, MAX_HEIGHT);\n\n      // Convertir en base64 JPEG with quality 0.7\n      const croppedImage = canvas.toDataURL('image/jpeg', 0.7);\n\n      // Mettre à jour l'image du membre dans le store\n      this.$store.dispatch('updateMember', {\n        name: this.currentMember.name,\n        image: croppedImage\n      });\n\n      // Réinitialiser\n      this.cropperVisible = false;\n      this.currentMember = null;\n      this.currentImage = null;\n      this.cancelEdit();\n    },\n    cancelCrop() {\n      this.cropperVisible = false;\n      this.currentMember = null;\n    },\n    updateMemberImage(event, member) {\n      const file = event.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.currentMember = member;\n        this.currentImage = e.target.result;\n        this.cropperVisible = true;\n      };\n      reader.readAsDataURL(file);\n    },\n    deleteMemberImage(member) {\n      this.$store.dispatch('updateMember', {\n        name: member.name,\n        image: null\n      });\n      this.editingMember = '';\n    },\n    deleteMemberBirthday(member) {\n      this.$store.dispatch('updateMember', {\n        name: member.name,\n        birthday: ''\n      });\n      this.editingMember = '';\n    },\n    updateMemberBirthday(member) {\n      this.$store.dispatch('updateMember', {\n        name: member.name,\n        birthday: member.birthday\n      });\n      this.editingMember = '';\n      this.editingField = '';\n    },\n    saveMemberName() {\n      if (!this.editingName || this.originalName === this.editingName) {\n        this.cancelEdit();\n        return;\n      }\n      this.$store.dispatch('updateMemberName', {\n        oldName: this.originalName,\n        newName: this.editingName\n      });\n      this.cancelEdit();\n    },\n    cancelEdit() {\n      this.editingMember = '';\n      this.editingField = '';\n      this.originalName = '';\n      this.editingName = '';\n    }\n  }\n};","map":{"version":3,"names":["AddMember","Cropper","state","members","components","VueCropper","data","showAddMember","relationship","ageSortOrder","nameSortOrder","hoveredIcon","editingMember","editingField","originalName","editingName","memberAge","cropperVisible","currentMember","currentImage","fileInputs","computed","$store","darkMode","watch","handler","forEach","member","toggleRelationship","immediate","methods","formatBirthday","dateString","date","Date","day","getDate","year","getFullYear","monthNames","month","getMonth","sortMembersByName","sort","a","b","name","localeCompare","sortMembersByAge","age","confirmDeleteMember","memberToDelete","confirm","deleteMember","dispatch","handleCaseMarried","handleCaseSiblings","handleCaseChildren","filteredMembersExceptCurrent","index","marriedMemberName","married","childrenNames","Set","children","parentNames","m","includes","add","filter","siblings","has","siblingsMemberNames","childrenMemberNames","setRelation","selectedMember","event","console","log","selectedInputId","error","cancelRelationshipChoice","unsetMarried","partner","find","unsetSibling","siblingName","unsetChildren","childName","editMemberPhoto","editMemberBirthday","editMemberName","triggerFileInput","click","onFileChange","e","file","target","files","url","URL","createObjectURL","image","openCropper","applyCrop","result","$refs","cropper","getResult","sourceCanvas","canvas","getCanvas","MAX_WIDTH","MAX_HEIGHT","document","createElement","ctx","getContext","width","height","drawImage","croppedImage","toDataURL","cancelEdit","cancelCrop","updateMemberImage","reader","FileReader","onload","readAsDataURL","deleteMemberImage","deleteMemberBirthday","birthday","updateMemberBirthday","saveMemberName","oldName","newName"],"sources":["/Users/quentin/Family-Tree/src/views/MemberList.vue"],"sourcesContent":["<template>\n    <div class=\"content\">\n        <AddMember v-if=\"showAddMember\" @member-created=\"handleMemberCreated\" />\n        <p class=\"title\">The members</p>\n        <table class=\"custom-table\" v-if=\"members.length > 0\">\n            <thead>\n                <tr>\n                    <td class=\"column_gender table_header\" :class=\"{ dark: darkMode }\" style=\"width:20px\"></td>\n                    <td class=\"column_photo table_header\" :class=\"{ dark: darkMode }\">Photo</td>\n                    <td class=\"column_name table_header\" :class=\"{ dark: darkMode }\">Name\n                        <button style=\"background-color: transparent; border:none; cursor: pointer\"\n                            @click=\"sortMembersByName\">\n                            <img \n                                v-if=\"this.nameSortOrder === 'asc' && this.darkMode === false\"\n                                style=\"width:15px; margin-left: -5px\"\n                                src=\"@/assets/arrow-up.png\" />\n                            <img \n                                v-if=\"this.nameSortOrder === 'desc' && this.darkMode === false\" \n                                style=\"width:15px; margin-left: -5px\" \n                                src=\"@/assets/arrow-down.png\" />\n                            <img \n                                v-if=\"this.nameSortOrder === 'asc' && this.darkMode === true\"\n                                style=\"width:15px; margin-left: -5px\"\n                                src=\"@/assets/arrow-up-dark.png\" />\n                            <img \n                                v-if=\"this.nameSortOrder === 'desc' && this.darkMode === true\" \n                                style=\"width:15px; margin-left: -5px\" \n                                src=\"@/assets/arrow-down-dark.png\" />\n                        </button>\n                    </td>\n                    <td class=\"column_age table_header\" :class=\"{ dark: darkMode }\">Age\n                        <button style=\"background-color: transparent; border:none; cursor: pointer\"\n                            @click=\"sortMembersByAge\">\n                            <img \n                                v-if=\"this.ageSortOrder === 'asc' && this.darkMode === false\" \n                                style=\"width:15px; margin-left: -5px\"\n                                src=\"../assets/arrow-up.png\" />\n                            <img \n                                v-if=\"this.ageSortOrder === 'desc' && this.darkMode === false\" \n                                style=\"width:15px; margin-left: -5px\" \n                                src=\"../assets/arrow-down.png\" />\n                            <img \n                                v-if=\"this.ageSortOrder === 'asc' && this.darkMode === true\" \n                                style=\"width:15px; margin-left: -5px\"\n                                src=\"../assets/arrow-up-dark.png\" />\n                            <img \n                                v-if=\"this.ageSortOrder === 'desc' && this.darkMode === true\" \n                                style=\"width:15px; margin-left: -5px\" \n                                src=\"../assets/arrow-down-dark.png\" />\n                        </button>\n                    </td>\n                    <td class=\"column_birthday table_header\" :class=\"{ dark: darkMode }\">Birthday</td>\n                    <td class=\"column_relationship table_header\" :class=\"{ dark: darkMode }\">Relationship</td>\n                    <td class=\"table_header\" :class=\"{ dark: darkMode }\"></td>\n                </tr>\n            </thead>\n            <transition-group name=\"list\" tag=\"tbody\">\n                <tr v-for=\"(member, index) in  members \" :key=\"member.name\" class=\"list-item\">\n                    <!-- GENDER -->\n                    <td>\n                        <div v-if=\"member.gender === 'male'\" class=\"member_gender\"\n                            style=\"background-color: var(--blue)\">\n                        </div>\n                        <div v-else class=\"member_gender\" style=\"background-color: var(--pink)\"></div>\n                    </td>\n                    <!-- PHOTO -->\n                    <td>\n                        <img style=\"width:100px\" v-if=\"member.image\" :src=\"member.image\">\n                        <img style=\"width:100px\" v-else-if=\"member.gender === 'male'\" src=\"@/assets/avatar_male.png\">\n                        <img style=\"width:100px\" v-else src=\"@/assets/avatar_female.png\">\n                        <img\n                            v-if=\"this.darkMode === false && (editingMember !== member.name || editingField !== 'image')\" \n                            :src=\"hoveredIcon === member.name + '-image' ? \n                            require('@/assets/edit_red.png') : require('@/assets/edit.png')\"\n                            style=\"width: 15px; margin-left:5px\" \n                            class=\"edit_member_box\" \n                            @click=\"editMemberPhoto(member)\"\n                            @mouseenter=\"hoveredIcon = member.name + '-image'\"\n                            @mouseleave=\"hoveredIcon = ''\" />\n                        <img\n                            v-else-if=\"this.darkMode === true && (editingMember !== member.name || editingField !== 'image')\" \n                            :src=\"hoveredIcon === member.name + '-image' ? \n                            require('@/assets/edit_red.png') : require('@/assets/edit_dark.png')\"\n                            style=\"width: 15px; margin-left:5px\" \n                            class=\"edit_member_box\" \n                            @click=\"editMemberPhoto(member)\"\n                            @mouseenter=\"hoveredIcon = member.name + '-image'\"\n                            @mouseleave=\"hoveredIcon = ''\" />\n                        <div v-if=\"editingMember === member.name && editingField === 'image'\">\n                            <button class=\"btn_edit\" v-if=\"member.image && !member.image.includes('avatar_male') && !member.image.includes('avatar_female')\" @click=\"triggerFileInput(member)\">CHANGE</button>\n                            <button class=\"btn_edit\" v-else @click=\"triggerFileInput(member)\">UPLOAD</button>\n                            <button class=\"btn_edit\" v-if=\"member.image && !member.image.includes('avatar_male') && !member.image.includes('avatar_female')\" @click=\"openCropper(member)\">CROP</button>\n                            <button class=\"btn_edit\" v-if=\"member.image && !member.image.includes('avatar_male') && !member.image.includes('avatar_female')\" @click=\"deleteMemberImage(member)\">DELETE</button>\n                            <button class=\"btn_edit\" @click=\"cancelEdit()\">CANCEL</button>\n                        </div>\n                        <input \n                            type=\"file\"\n                            style=\"display: none;\"\n                            :ref=\"el => { if (el) fileInputs[member.name] = el }\"\n                            @change=\"updateMemberImage($event, member)\" />\n                    </td>\n                    <td>\n                        <span v-if=\"editingMember !== member.name || editingField !== 'name'\">{{ member.name }}</span>\n                        <img\n                            v-if=\"!darkMode && (editingMember !== member.name || editingField !== 'name')\"\n                            :src=\"hoveredIcon === member.name + '-name' ? require('@/assets/edit_red.png') : require('@/assets/edit.png')\"\n                            style=\"width: 15px; margin-left:5px\" \n                            class=\"edit_member_box\" \n                            @click=\"editMemberName(member)\"\n                            @mouseenter=\"hoveredIcon = member.name + '-name'\"\n                            @mouseleave=\"hoveredIcon = ''\" />\n                        <img\n                            v-else-if=\"darkMode && (editingMember !== member.name || editingField !== 'name')\"\n                            :src=\"hoveredIcon === member.name + '-name' ? require('@/assets/edit_red.png') : require('@/assets/edit_dark.png')\"\n                            style=\"width: 15px; margin-left:5px\" \n                            class=\"edit_member_box\" \n                            @click=\"editMemberName(member)\"\n                            @mouseenter=\"hoveredIcon = member.name + '-name'\"\n                            @mouseleave=\"hoveredIcon = ''\" />\n                        <div v-if=\"editingMember === member.name && editingField === 'name'\">\n                            <input \n                                type=\"text\"\n                                v-model=\"editingName\"\n                                @keyup.enter=\"saveMemberName()\"\n                            />\n                            <button class=\"btn_edit\" @click=\"saveMemberName()\">SAVE</button>\n                            <button class=\"btn_edit\" @click=\"cancelEdit()\">CANCEL</button>\n                        </div>\n                    </td>\n                    <td>\n                        <span v-if=\"member.age\">{{ member.age }} years old</span>\n                        <span v-else>??</span>\n                    </td>\n                    <td>\n                        <div v-if=\"editingMember === member.name && editingField === 'birthday'\">\n                            <input \n                                type=\"date\"\n                                v-model=\"member.birthday\"\n                            />\n                            <button class=\"btn_edit\" @click=\"updateMemberBirthday(member)\">SAVE</button>\n                            <button class=\"btn_edit\" @click=\"deleteMemberBirthday(member)\">DELETE</button>\n                            <button class=\"btn_edit\" @click=\"cancelEdit()\">CANCEL</button>\n                        </div>\n                        <div v-else>\n                            {{ formatBirthday(member.birthday) }}\n                            <img\n                                v-if=\"!darkMode\"\n                                :src=\"hoveredIcon === member.name + '-birthday' ? require('@/assets/edit_red.png') : require('@/assets/edit.png')\"\n                                style=\"width: 15px; margin-left:5px\"\n                                class=\"edit_member_box\"\n                                @click=\"editMemberBirthday(member)\"\n                                @mouseenter=\"hoveredIcon = member.name + '-birthday'\"\n                                @mouseleave=\"hoveredIcon = ''\"\n                            />\n                            <img\n                                v-else\n                                :src=\"hoveredIcon === member.name + '-birthday' ? require('@/assets/edit_red.png') : require('@/assets/edit_dark.png')\"\n                                style=\"width: 15px; margin-left:5px\"\n                                class=\"edit_member_box\"\n                                @click=\"editMemberBirthday(member)\"\n                                @mouseenter=\"hoveredIcon = member.name + '-birthday'\"\n                                @mouseleave=\"hoveredIcon = ''\"\n                            />\n                        </div>\n                    </td>\n                    <td>\n                        <div style=\"color: red; font-weight: bold;\" class=\"married-checkbox\">\n                            <img src=\"../assets/relationship_married.png\" style=\"width: 15px\" v-if=\"member.married\"/>\n                            <img src=\"../assets/relationship_married_none.png\" style=\"width: 15px\" v-else/>\n                            <input type=\"checkbox\" :checked=\"!!member.married\" @change=\"unsetMarried(member)\" v-if=\"member.married\">\n                            {{ member.married }}\n                        </div>\n                        <div style=\"color: var(--blue); font-weight: bold\" class=\"siblings_checkbox\">\n                            <img src=\"../assets/relationship_siblings.png\" style=\"width: 15px\" v-if=\"member.siblings && member.siblings.length > 0\"/>\n                            <img src=\"../assets/relationship_siblings_none.png\" style=\"width: 15px\" v-else/>\n                            <span v-for=\"(siblingName, sIndex) in member.siblings\" :key=\"siblingName\">\n                                <input type=\"checkbox\" :checked=\"true\" @change=\"unsetSibling(member, siblingName)\">\n                                {{ siblingName }}<span v-if=\"member.siblings && sIndex < member.siblings.length - 1\">, </span>\n                            </span>\n                        </div>\n                        <div style=\"color: green; font-weight: bold\" class=\"children-checkbox\">\n                            <img src=\"../assets/relationship_children.png\" style=\"width: 15px\" v-if=\"member.children && member.children.length > 0\"/>\n                            <img src=\"../assets/relationship_children_none.png\" style=\"width: 15px\" v-else/>\n                            <span v-for=\"(childName, cIndex) in member.children\" :key=\"childName\">\n                                <input type=\"checkbox\" :checked=\"true\" @change=\"unsetChildren(member, childName)\">\n                                {{ childName }}<span v-if=\"member.children && cIndex < member.children.length - 1\">, </span>\n                            </span>\n                        </div>\n                        <div style=\"display: flex; margin: 20px auto 0 auto; justify-content: center; align-items: center;\"\n                            v-if=\"!member.toggleRelationship\">\n                            <div style=\"margin-right: 10px;\" v-if=\"!member.married\">\n                                <input type=\"checkbox\" data-relation-type=\"married\" v-model=\"member.toggleRelationship\"\n                                    @change=\"handleCaseMarried(member)\">\n                                <label for=\"member.toggleRelationship\">Married</label>\n                            </div>\n                            <div style=\"margin-right: 10px;\">\n                                <input type=\"checkbox\" data-relation-type=\"siblings\" v-model=\"member.toggleRelationship\"\n                                    @change=\"handleCaseSiblings(member)\">\n                                <label for=\"member.toggleRelationship\">Siblings</label>\n                            </div>\n                            <div style=\"margin-right: 10px;\">\n                                <input type=\"checkbox\" data-relation-type=\"children\" v-model=\"member.toggleRelationship\"\n                                    @change=\"handleCaseChildren(member)\">\n                                <label for=\"member.toggleRelationship\">Children</label>\n                            </div>\n                        </div>\n                        <div style=\"margin-top: 10px\" v-else>\n                            <div class=\"members-relationships\" v-for=\" m  in  filteredMembersExceptCurrent(index) \"\n                                :key=\"m.name\" @click=\"setRelation(member, m, $event)\">\n                                <input type=\"checkbox\" :id=\"m.name + '_rel'\">\n                                <label :for=\"m.name + '_rel'\">{{ m.name }}</label>\n                            </div>\n                            <button class=\"btn_edit cancel_relationship\"\n                                @click=\"cancelRelationshipChoice(member)\">ANNULER</button>\n                        </div>\n                    </td>\n                    <td style=\"border: solid 2px white\">\n                        <div class=\"delete_member\"><button\n                                style=\"background-color:transparent; border: none; margin: auto 0\"\n                                @click=\"confirmDeleteMember(member)\" class=\"button\">\n                                <img \n                                    v-if=\"this.darkMode === false\"\n                                    src=\"../assets/bin.png\" \n                                    class=\"shake_bin\" />\n                                <img \n                                    v-if=\"this.darkMode === true\"\n                                    src=\"../assets/bin_dark.png\" \n                                    class=\"shake_bin\" />\n                            </button></div>\n                    </td>\n                </tr>\n            </transition-group>\n        </table>\n        <p v-else style=\"font-style: italic;\">Aucun membre n'est enregistré.</p>\n        <div>\n    \n\n    <!-- MODAL CROPPER -->\n    <div v-if=\"cropperVisible\" class=\"modal-backdrop\">\n      <div class=\"modal\">\n        <vue-cropper\n          ref=\"cropper\"\n          :src=\"currentImage\"\n          :stencil-props=\"{ aspectRatio: 1 }\"\n          class=\"cropper\"\n        />\n        <div class=\"modal-actions\">\n          <button class=\"btn_edit\" @click=\"applyCrop\">Save</button>\n          <button class=\"btn_edit\" @click=\"cancelCrop\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n    </div>\n    \n</template>\n\n<script>\nimport AddMember from './AddMember.vue';\nimport { Cropper } from 'vue-advanced-cropper'\nimport 'vue-advanced-cropper/dist/style.css'\nexport default {\n    state: {\n        members: []\n    },\n    components: {\n        AddMember,\n        VueCropper: Cropper\n    },\n    data() {\n        return {\n            showAddMember: false,\n            relationship: '',\n            ageSortOrder: 'asc',\n            nameSortOrder: 'asc',\n            hoveredIcon: '',\n            editingMember: '',\n            editingField: '',\n            originalName: '',\n            editingName: '',\n            memberAge: null,\n            cropperVisible: false,\n            currentMember: null,\n            currentImage: null,\n            fileInputs: {},\n        };\n    },\n    computed: {\n        members() {\n            return this.$store.state.members;\n        },\n        darkMode() {\n            return this.$store.state.darkMode;\n        }\n    },\n    watch: {\n        members: {\n            handler(members) {\n                (members || []).forEach(member => {\n                    member.toggleRelationship = false;\n                });\n            },\n            immediate: true\n        }\n    },\n    methods: {\n        formatBirthday(dateString) {\n          if (!dateString) return '';\n          const date = new Date(dateString);\n          const day = date.getDate();\n          const year = date.getFullYear();\n          const monthNames = [\"Jan.\", \"Feb.\", \"Mar.\", \"Apr.\", \"May\", \"Jun.\",\n            \"Jul.\", \"Aug.\", \"Sep.\", \"Oct.\", \"Nov.\", \"Dec.\"\n          ];\n          const month = monthNames[date.getMonth()];\n          return `${day} ${month} ${year}`;\n        },\n        sortMembersByName() {\n            if (this.nameSortOrder === 'asc') {\n                this.members.sort((a, b) => a.name.localeCompare(b.name));\n                this.nameSortOrder = 'desc';\n            } else {\n                this.members.sort((a, b) => b.name.localeCompare(a.name));\n                this.nameSortOrder = 'asc';\n            }\n        },\n        sortMembersByAge() {\n            if (this.ageSortOrder === 'asc') {\n                this.members.sort((a, b) => a.age - b.age);\n                this.ageSortOrder = 'desc';\n            } else {\n                this.members.sort((a, b) => b.age - a.age);\n                this.ageSortOrder = 'asc';\n            }\n        },\n        confirmDeleteMember(member) {\n            this.memberToDelete = member;\n            if (confirm(\"Êtes-vous sûr de vouloir supprimer ce membre ?\")) {\n                this.deleteMember(this.memberToDelete);\n            } else {\n                // Si l'utilisateur clique sur \"NON\", ne faites rien\n                // Vous pouvez également ajouter un message ou une action supplémentaire ici si nécessaire\n            }\n        },\n\n        deleteMember(member) {\n            this.$store.dispatch('deleteMember', member.name);\n        },\n        handleCaseMarried(member) {\n            this.relationship = \"married\";\n            member.toggleRelationship = true;\n        },\n        handleCaseSiblings(member) {\n            this.relationship = \"siblings\";\n            member.toggleRelationship = true;\n        },\n        handleCaseChildren(member) {\n            this.relationship = \"children\";\n            member.toggleRelationship = true;\n        },\n        filteredMembersExceptCurrent(index) {\n            const currentMember = this.members[index];\n            const marriedMemberName = currentMember.married;\n\n            const childrenNames = new Set(currentMember.children || []);\n            const parentNames = new Set();\n            this.members.forEach(m => {\n                if (m.children && m.children.includes(currentMember.name)) {\n                    parentNames.add(m.name);\n                }\n            });\n\n            switch (this.relationship) {\n                case 'married':\n                    return this.members.filter(member => {\n                        return member.name !== currentMember.name &&\n                            member.name !== marriedMemberName &&\n                            !currentMember.siblings.includes(member.name) &&\n                            !childrenNames.has(member.name) &&\n                            !parentNames.has(member.name);\n                    });\n                case 'siblings':\n                    var siblingsMemberNames = currentMember.siblings;\n                    return this.members.filter(member => {\n                        return member.name !== currentMember.name &&\n                            member.name !== marriedMemberName &&\n                            !childrenNames.has(member.name) &&\n                            !parentNames.has(member.name) &&\n                            !siblingsMemberNames.includes(member.name);\n                    });\n                case 'children':\n                    var childrenMemberNames = currentMember.children;\n                    return this.members.filter(member => {\n                        return member.name !== currentMember.name &&\n                            member.name !== marriedMemberName &&\n                            !currentMember.siblings.includes(member.name) &&\n                            !parentNames.has(member.name) &&\n                            !childrenMemberNames.includes(member.name);\n                    });\n            }\n        },\n        setRelation(member, selectedMember, event) {\n            console.log(\"event : \" + event)\n            const selectedInputId = this.relationship;\n            switch (selectedInputId) {\n                case 'married':\n                    this.$store.dispatch('updateMember', { ...member, married: selectedMember.name });\n                    this.$store.dispatch('updateMember', { ...selectedMember, married: member.name });\n                    break;\n                case 'siblings':\n                    this.$store.dispatch('setSiblings', { member: member, selectedMember: selectedMember });\n                    break;\n                case 'children':\n                    this.$store.dispatch('updateMember', { ...member, children: [...member.children, selectedMember.name] });\n                    break;\n                default:\n                    console.error('Type de relation non valide');\n                    return;\n            }\n        },\n        \n        cancelRelationshipChoice(member) {\n            member.toggleRelationship = false;\n        },\n        unsetMarried(member) {\n            const partner = this.members.find(m => m.name === member.married);\n            this.$store.dispatch('updateMember', { ...member, married: '' });\n            if (partner) {\n                this.$store.dispatch('updateMember', { ...partner, married: '' });\n            }\n        },\n        unsetSibling(member, siblingName) {\n            this.$store.dispatch('unsetSibling', { member, siblingName });\n        },\n        unsetChildren(member, childName) {\n            this.$store.dispatch('unsetChildren', { member, childName });\n        },\n        editMemberPhoto(member) {\n            this.editingMember = member.name;\n            this.editingField = 'image';\n            console.log(member)\n        },\n        editMemberBirthday(member) {\n            this.editingMember = member.name;\n            this.editingField = 'birthday';\n        },\n        editMemberName(member) {\n            this.originalName = member.name;\n            this.editingName = member.name;\n            this.editingMember = member.name;\n            this.editingField = 'name';\n        },\n        triggerFileInput(member) {\n            this.fileInputs[member.name].click();\n        },\n        onFileChange(e, member) {\n      const file = e.target.files[0]\n      if (file) {\n        const url = URL.createObjectURL(file)\n        member.image = url\n      }\n    },\n    openCropper(member) {\n      this.currentMember = member\n      this.currentImage = member.image\n      this.cropperVisible = true\n    },\n    applyCrop() {\n      if (!this.currentMember) return;\n\n      const result = this.$refs.cropper.getResult();\n      const sourceCanvas = result?.canvas || (typeof result.getCanvas === 'function' ? result.getCanvas() : null);\n\n      if (!sourceCanvas) {\n        console.error('Aucun canvas trouvé pour le crop');\n        return;\n      }\n\n      const MAX_WIDTH = 300; // Max width for the final image\n      const MAX_HEIGHT = 300; // Max height for the final image\n\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      canvas.width = MAX_WIDTH;\n      canvas.height = MAX_HEIGHT;\n\n      ctx.drawImage(sourceCanvas, 0, 0, MAX_WIDTH, MAX_HEIGHT);\n\n      // Convertir en base64 JPEG with quality 0.7\n      const croppedImage = canvas.toDataURL('image/jpeg', 0.7);\n\n      // Mettre à jour l'image du membre dans le store\n      this.$store.dispatch('updateMember', {\n        name: this.currentMember.name,\n        image: croppedImage\n      });\n\n      // Réinitialiser\n      this.cropperVisible = false;\n      this.currentMember = null;\n      this.currentImage = null;\n      this.cancelEdit();\n    },\n\n    cancelCrop() {\n      this.cropperVisible = false\n      this.currentMember = null\n    },\n  \n        updateMemberImage(event, member) {\n            const file = event.target.files[0];\n            if (!file) return;\n\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                this.currentMember = member;\n                this.currentImage = e.target.result;\n                this.cropperVisible = true;\n            };\n            reader.readAsDataURL(file);\n        },\n        deleteMemberImage(member) {\n            this.$store.dispatch('updateMember', { name: member.name, image: null });\n            this.editingMember = '';\n        },\n        deleteMemberBirthday(member) {\n            this.$store.dispatch('updateMember', { name: member.name, birthday: '' });\n            this.editingMember = '';\n        },\n        updateMemberBirthday(member) {\n            this.$store.dispatch('updateMember', { \n                name: member.name, \n                birthday: member.birthday \n            });\n            this.editingMember = '';\n            this.editingField = '';\n        },\n        saveMemberName() {\n            if (!this.editingName || this.originalName === this.editingName) {\n                this.cancelEdit();\n                return;\n            }\n            this.$store.dispatch('updateMemberName', {\n                oldName: this.originalName,\n                newName: this.editingName,\n            });\n            this.cancelEdit();\n        },\n        cancelEdit() {\n            this.editingMember = '';\n            this.editingField = '';\n            this.originalName = '';\n            this.editingName = '';\n        },\n    }}\n\n</script>\n\n<style>\n.btn_edit {\n    padding: 2px 10px;\n} \n\n.custom-table {\n    border-collapse: collapse;\n    width: 100%;\n    height: fit-content;\n    background-color: var(--lightGrey);\n}\n\n.edit_member_box {\n    cursor:pointer;\n}\n\n.member_gender {\n    height: 20px;\n    width: 20px;\n    margin: auto;\n    animation: gender_rotate 1.5s infinite;\n}\n\n@keyframes gender_rotate {\n    0% {\n        transform: scale(1);\n    }\n\n    50% {\n        transform: rotate(45deg);\n    }\n\n    100% {\n        transform: rotate(90deg);\n    }\n}\n\n@keyframes pulse {\n    0% {\n        transform: scale(1);\n    }\n\n    50% {\n        transform: scale(1.1);\n    }\n\n    100% {\n        transform: scale(1.2);\n    }\n}\n\n.heart-icon {\n    animation: pulse 1.5s infinite;\n\n}\n\n.shake_bin {\n    width: 25px;\n}\n\n.shake_bin:hover {\n    animation: shake_bin 0.5s infinite;\n}\n\n@keyframes shake_bin {\n    0% {\n        transform: rotate(0deg);\n    }\n\n    25% {\n        transform: rotate(45deg) scale(1.5);\n    }\n\n    50% {\n        transform: rotate(0deg) scale(2);\n    }\n\n    75% {\n        transform: rotate(-45deg) scale(1.5);\n    }\n\n    100% {\n        transform: rotate(0deg);\n    }\n}\n\n.custom-table thead tr {\n    position: sticky;\n    top: 40px;\n    z-index: 1;\n}\n\n.table_header {\n    background-color: var(--lightGrey);\n    color: black;\n    font-weight: bold;\n    text-transform: uppercase;\n    box-shadow: inset 0 -1px 0 0 white;\n}\n\n.table_header.dark {\n    color:white;\n}\n\ntd {\n    border: 2px solid white;\n    padding: 8px;\n}\n\ntd.column_photo {\n    width: 10%;\n}\n\ntd.column_name {\n    width: 10%;\n}\n\ntd.column_age {\n    width: 10%;\n}\n\ntd.column_gender {\n    width: 10%;\n}\n\ntd.column_relationship {\n    width: 50%;\n}\n\n.children-checkbox {\n    text-align:left;\n}\n\n.children-checkbox input[type=\"checkbox\"] {\n    accent-color: green;\n}\n\n.married-checkbox {\n    text-align: left;\n}\n\n.married-checkbox input[type=\"checkbox\"] {\n    accent-color: red;\n}\n\n.siblings_checkbox {\n    text-align: left;\n}\n\n.list-item {\n    transition: all 0.5s ease;\n}\n\n.list-enter-active,\n.list-leave-active {\n    transition: all 0.5s ease;\n}\n\n.list-enter-from,\n.list-leave-to {\n    opacity: 0;\n    transform: translateY(30px);\n}\n\n.list-move {\n    transition: transform 0.5s ease;\n}\n\n.member-photo {\n  width: 60px;\n  height: 60px;\n  object-fit: cover;\n  border-radius: 6px;\n}\n\n/* Modal simple */\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n.modal {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n}\n.cropper {\n  width: 300px;\n  height: 300px;\n}\n.modal-actions {\n  margin-top: 10px;\n  display: flex;\n  gap: 10px;\n}\n</style>\n"],"mappings":"AAkQA,OAAOA,SAAQ,MAAO,iBAAiB;AACvC,SAASC,OAAM,QAAS,sBAAqB;AAC7C,OAAO,qCAAoC;AAC3C,eAAe;EACXC,KAAK,EAAE;IACHC,OAAO,EAAE;EACb,CAAC;EACDC,UAAU,EAAE;IACRJ,SAAS;IACTK,UAAU,EAAEJ;EAChB,CAAC;EACDK,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,aAAa,EAAE,KAAK;MACpBC,YAAY,EAAE,EAAE;MAChBC,YAAY,EAAE,KAAK;MACnBC,aAAa,EAAE,KAAK;MACpBC,WAAW,EAAE,EAAE;MACfC,aAAa,EAAE,EAAE;MACjBC,YAAY,EAAE,EAAE;MAChBC,YAAY,EAAE,EAAE;MAChBC,WAAW,EAAE,EAAE;MACfC,SAAS,EAAE,IAAI;MACfC,cAAc,EAAE,KAAK;MACrBC,aAAa,EAAE,IAAI;MACnBC,YAAY,EAAE,IAAI;MAClBC,UAAU,EAAE,CAAC;IACjB,CAAC;EACL,CAAC;EACDC,QAAQ,EAAE;IACNlB,OAAOA,CAAA,EAAG;MACN,OAAO,IAAI,CAACmB,MAAM,CAACpB,KAAK,CAACC,OAAO;IACpC,CAAC;IACDoB,QAAQA,CAAA,EAAG;MACP,OAAO,IAAI,CAACD,MAAM,CAACpB,KAAK,CAACqB,QAAQ;IACrC;EACJ,CAAC;EACDC,KAAK,EAAE;IACHrB,OAAO,EAAE;MACLsB,OAAOA,CAACtB,OAAO,EAAE;QACb,CAACA,OAAM,IAAK,EAAE,EAAEuB,OAAO,CAACC,MAAK,IAAK;UAC9BA,MAAM,CAACC,kBAAiB,GAAI,KAAK;QACrC,CAAC,CAAC;MACN,CAAC;MACDC,SAAS,EAAE;IACf;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,cAAcA,CAACC,UAAU,EAAE;MACzB,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,MAAMG,GAAE,GAAIF,IAAI,CAACG,OAAO,CAAC,CAAC;MAC1B,MAAMC,IAAG,GAAIJ,IAAI,CAACK,WAAW,CAAC,CAAC;MAC/B,MAAMC,UAAS,GAAI,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAC/D,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAK,CAC9C;MACD,MAAMC,KAAI,GAAID,UAAU,CAACN,IAAI,CAACQ,QAAQ,CAAC,CAAC,CAAC;MACzC,OAAQ,GAAEN,GAAG,IAAIK,KAAK,IAAIH,IAAK,EAAC;IAClC,CAAC;IACDK,iBAAiBA,CAAA,EAAG;MAChB,IAAI,IAAI,CAAChC,aAAY,KAAM,KAAK,EAAE;QAC9B,IAAI,CAACP,OAAO,CAACwC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,IAAI,CAACC,aAAa,CAACF,CAAC,CAACC,IAAI,CAAC,CAAC;QACzD,IAAI,CAACpC,aAAY,GAAI,MAAM;MAC/B,OAAO;QACH,IAAI,CAACP,OAAO,CAACwC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,IAAI,CAACC,aAAa,CAACH,CAAC,CAACE,IAAI,CAAC,CAAC;QACzD,IAAI,CAACpC,aAAY,GAAI,KAAK;MAC9B;IACJ,CAAC;IACDsC,gBAAgBA,CAAA,EAAG;MACf,IAAI,IAAI,CAACvC,YAAW,KAAM,KAAK,EAAE;QAC7B,IAAI,CAACN,OAAO,CAACwC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACK,GAAE,GAAIJ,CAAC,CAACI,GAAG,CAAC;QAC1C,IAAI,CAACxC,YAAW,GAAI,MAAM;MAC9B,OAAO;QACH,IAAI,CAACN,OAAO,CAACwC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACI,GAAE,GAAIL,CAAC,CAACK,GAAG,CAAC;QAC1C,IAAI,CAACxC,YAAW,GAAI,KAAK;MAC7B;IACJ,CAAC;IACDyC,mBAAmBA,CAACvB,MAAM,EAAE;MACxB,IAAI,CAACwB,cAAa,GAAIxB,MAAM;MAC5B,IAAIyB,OAAO,CAAC,gDAAgD,CAAC,EAAE;QAC3D,IAAI,CAACC,YAAY,CAAC,IAAI,CAACF,cAAc,CAAC;MAC1C,OAAO;QACH;QACA;MAAA;IAER,CAAC;IAEDE,YAAYA,CAAC1B,MAAM,EAAE;MACjB,IAAI,CAACL,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE3B,MAAM,CAACmB,IAAI,CAAC;IACrD,CAAC;IACDS,iBAAiBA,CAAC5B,MAAM,EAAE;MACtB,IAAI,CAACnB,YAAW,GAAI,SAAS;MAC7BmB,MAAM,CAACC,kBAAiB,GAAI,IAAI;IACpC,CAAC;IACD4B,kBAAkBA,CAAC7B,MAAM,EAAE;MACvB,IAAI,CAACnB,YAAW,GAAI,UAAU;MAC9BmB,MAAM,CAACC,kBAAiB,GAAI,IAAI;IACpC,CAAC;IACD6B,kBAAkBA,CAAC9B,MAAM,EAAE;MACvB,IAAI,CAACnB,YAAW,GAAI,UAAU;MAC9BmB,MAAM,CAACC,kBAAiB,GAAI,IAAI;IACpC,CAAC;IACD8B,4BAA4BA,CAACC,KAAK,EAAE;MAChC,MAAMzC,aAAY,GAAI,IAAI,CAACf,OAAO,CAACwD,KAAK,CAAC;MACzC,MAAMC,iBAAgB,GAAI1C,aAAa,CAAC2C,OAAO;MAE/C,MAAMC,aAAY,GAAI,IAAIC,GAAG,CAAC7C,aAAa,CAAC8C,QAAO,IAAK,EAAE,CAAC;MAC3D,MAAMC,WAAU,GAAI,IAAIF,GAAG,CAAC,CAAC;MAC7B,IAAI,CAAC5D,OAAO,CAACuB,OAAO,CAACwC,CAAA,IAAK;QACtB,IAAIA,CAAC,CAACF,QAAO,IAAKE,CAAC,CAACF,QAAQ,CAACG,QAAQ,CAACjD,aAAa,CAAC4B,IAAI,CAAC,EAAE;UACvDmB,WAAW,CAACG,GAAG,CAACF,CAAC,CAACpB,IAAI,CAAC;QAC3B;MACJ,CAAC,CAAC;MAEF,QAAQ,IAAI,CAACtC,YAAY;QACrB,KAAK,SAAS;UACV,OAAO,IAAI,CAACL,OAAO,CAACkE,MAAM,CAAC1C,MAAK,IAAK;YACjC,OAAOA,MAAM,CAACmB,IAAG,KAAM5B,aAAa,CAAC4B,IAAG,IACpCnB,MAAM,CAACmB,IAAG,KAAMc,iBAAgB,IAChC,CAAC1C,aAAa,CAACoD,QAAQ,CAACH,QAAQ,CAACxC,MAAM,CAACmB,IAAI,KAC5C,CAACgB,aAAa,CAACS,GAAG,CAAC5C,MAAM,CAACmB,IAAI,KAC9B,CAACmB,WAAW,CAACM,GAAG,CAAC5C,MAAM,CAACmB,IAAI,CAAC;UACrC,CAAC,CAAC;QACN,KAAK,UAAU;UACX,IAAI0B,mBAAkB,GAAItD,aAAa,CAACoD,QAAQ;UAChD,OAAO,IAAI,CAACnE,OAAO,CAACkE,MAAM,CAAC1C,MAAK,IAAK;YACjC,OAAOA,MAAM,CAACmB,IAAG,KAAM5B,aAAa,CAAC4B,IAAG,IACpCnB,MAAM,CAACmB,IAAG,KAAMc,iBAAgB,IAChC,CAACE,aAAa,CAACS,GAAG,CAAC5C,MAAM,CAACmB,IAAI,KAC9B,CAACmB,WAAW,CAACM,GAAG,CAAC5C,MAAM,CAACmB,IAAI,KAC5B,CAAC0B,mBAAmB,CAACL,QAAQ,CAACxC,MAAM,CAACmB,IAAI,CAAC;UAClD,CAAC,CAAC;QACN,KAAK,UAAU;UACX,IAAI2B,mBAAkB,GAAIvD,aAAa,CAAC8C,QAAQ;UAChD,OAAO,IAAI,CAAC7D,OAAO,CAACkE,MAAM,CAAC1C,MAAK,IAAK;YACjC,OAAOA,MAAM,CAACmB,IAAG,KAAM5B,aAAa,CAAC4B,IAAG,IACpCnB,MAAM,CAACmB,IAAG,KAAMc,iBAAgB,IAChC,CAAC1C,aAAa,CAACoD,QAAQ,CAACH,QAAQ,CAACxC,MAAM,CAACmB,IAAI,KAC5C,CAACmB,WAAW,CAACM,GAAG,CAAC5C,MAAM,CAACmB,IAAI,KAC5B,CAAC2B,mBAAmB,CAACN,QAAQ,CAACxC,MAAM,CAACmB,IAAI,CAAC;UAClD,CAAC,CAAC;MACV;IACJ,CAAC;IACD4B,WAAWA,CAAC/C,MAAM,EAAEgD,cAAc,EAAEC,KAAK,EAAE;MACvCC,OAAO,CAACC,GAAG,CAAC,UAAS,GAAIF,KAAK;MAC9B,MAAMG,eAAc,GAAI,IAAI,CAACvE,YAAY;MACzC,QAAQuE,eAAe;QACnB,KAAK,SAAS;UACV,IAAI,CAACzD,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;YAAE,GAAG3B,MAAM;YAAEkC,OAAO,EAAEc,cAAc,CAAC7B;UAAK,CAAC,CAAC;UACjF,IAAI,CAACxB,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;YAAE,GAAGqB,cAAc;YAAEd,OAAO,EAAElC,MAAM,CAACmB;UAAK,CAAC,CAAC;UACjF;QACJ,KAAK,UAAU;UACX,IAAI,CAACxB,MAAM,CAACgC,QAAQ,CAAC,aAAa,EAAE;YAAE3B,MAAM,EAAEA,MAAM;YAAEgD,cAAc,EAAEA;UAAe,CAAC,CAAC;UACvF;QACJ,KAAK,UAAU;UACX,IAAI,CAACrD,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;YAAE,GAAG3B,MAAM;YAAEqC,QAAQ,EAAE,CAAC,GAAGrC,MAAM,CAACqC,QAAQ,EAAEW,cAAc,CAAC7B,IAAI;UAAE,CAAC,CAAC;UACxG;QACJ;UACI+B,OAAO,CAACG,KAAK,CAAC,6BAA6B,CAAC;UAC5C;MACR;IACJ,CAAC;IAEDC,wBAAwBA,CAACtD,MAAM,EAAE;MAC7BA,MAAM,CAACC,kBAAiB,GAAI,KAAK;IACrC,CAAC;IACDsD,YAAYA,CAACvD,MAAM,EAAE;MACjB,MAAMwD,OAAM,GAAI,IAAI,CAAChF,OAAO,CAACiF,IAAI,CAAClB,CAAA,IAAKA,CAAC,CAACpB,IAAG,KAAMnB,MAAM,CAACkC,OAAO,CAAC;MACjE,IAAI,CAACvC,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QAAE,GAAG3B,MAAM;QAAEkC,OAAO,EAAE;MAAG,CAAC,CAAC;MAChE,IAAIsB,OAAO,EAAE;QACT,IAAI,CAAC7D,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;UAAE,GAAG6B,OAAO;UAAEtB,OAAO,EAAE;QAAG,CAAC,CAAC;MACrE;IACJ,CAAC;IACDwB,YAAYA,CAAC1D,MAAM,EAAE2D,WAAW,EAAE;MAC9B,IAAI,CAAChE,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QAAE3B,MAAM;QAAE2D;MAAY,CAAC,CAAC;IACjE,CAAC;IACDC,aAAaA,CAAC5D,MAAM,EAAE6D,SAAS,EAAE;MAC7B,IAAI,CAAClE,MAAM,CAACgC,QAAQ,CAAC,eAAe,EAAE;QAAE3B,MAAM;QAAE6D;MAAU,CAAC,CAAC;IAChE,CAAC;IACDC,eAAeA,CAAC9D,MAAM,EAAE;MACpB,IAAI,CAACf,aAAY,GAAIe,MAAM,CAACmB,IAAI;MAChC,IAAI,CAACjC,YAAW,GAAI,OAAO;MAC3BgE,OAAO,CAACC,GAAG,CAACnD,MAAM;IACtB,CAAC;IACD+D,kBAAkBA,CAAC/D,MAAM,EAAE;MACvB,IAAI,CAACf,aAAY,GAAIe,MAAM,CAACmB,IAAI;MAChC,IAAI,CAACjC,YAAW,GAAI,UAAU;IAClC,CAAC;IACD8E,cAAcA,CAAChE,MAAM,EAAE;MACnB,IAAI,CAACb,YAAW,GAAIa,MAAM,CAACmB,IAAI;MAC/B,IAAI,CAAC/B,WAAU,GAAIY,MAAM,CAACmB,IAAI;MAC9B,IAAI,CAAClC,aAAY,GAAIe,MAAM,CAACmB,IAAI;MAChC,IAAI,CAACjC,YAAW,GAAI,MAAM;IAC9B,CAAC;IACD+E,gBAAgBA,CAACjE,MAAM,EAAE;MACrB,IAAI,CAACP,UAAU,CAACO,MAAM,CAACmB,IAAI,CAAC,CAAC+C,KAAK,CAAC,CAAC;IACxC,CAAC;IACDC,YAAYA,CAACC,CAAC,EAAEpE,MAAM,EAAE;MAC1B,MAAMqE,IAAG,GAAID,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC;MAC7B,IAAIF,IAAI,EAAE;QACR,MAAMG,GAAE,GAAIC,GAAG,CAACC,eAAe,CAACL,IAAI;QACpCrE,MAAM,CAAC2E,KAAI,GAAIH,GAAE;MACnB;IACF,CAAC;IACDI,WAAWA,CAAC5E,MAAM,EAAE;MAClB,IAAI,CAACT,aAAY,GAAIS,MAAK;MAC1B,IAAI,CAACR,YAAW,GAAIQ,MAAM,CAAC2E,KAAI;MAC/B,IAAI,CAACrF,cAAa,GAAI,IAAG;IAC3B,CAAC;IACDuF,SAASA,CAAA,EAAG;MACV,IAAI,CAAC,IAAI,CAACtF,aAAa,EAAE;MAEzB,MAAMuF,MAAK,GAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC;MAC7C,MAAMC,YAAW,GAAIJ,MAAM,EAAEK,MAAK,KAAM,OAAOL,MAAM,CAACM,SAAQ,KAAM,UAAS,GAAIN,MAAM,CAACM,SAAS,CAAC,IAAI,IAAI,CAAC;MAE3G,IAAI,CAACF,YAAY,EAAE;QACjBhC,OAAO,CAACG,KAAK,CAAC,kCAAkC,CAAC;QACjD;MACF;MAEA,MAAMgC,SAAQ,GAAI,GAAG,EAAE;MACvB,MAAMC,UAAS,GAAI,GAAG,EAAE;;MAExB,MAAMH,MAAK,GAAII,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMC,GAAE,GAAIN,MAAM,CAACO,UAAU,CAAC,IAAI,CAAC;MACnCP,MAAM,CAACQ,KAAI,GAAIN,SAAS;MACxBF,MAAM,CAACS,MAAK,GAAIN,UAAU;MAE1BG,GAAG,CAACI,SAAS,CAACX,YAAY,EAAE,CAAC,EAAE,CAAC,EAAEG,SAAS,EAAEC,UAAU,CAAC;;MAExD;MACA,MAAMQ,YAAW,GAAIX,MAAM,CAACY,SAAS,CAAC,YAAY,EAAE,GAAG,CAAC;;MAExD;MACA,IAAI,CAACpG,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QACnCR,IAAI,EAAE,IAAI,CAAC5B,aAAa,CAAC4B,IAAI;QAC7BwD,KAAK,EAAEmB;MACT,CAAC,CAAC;;MAEF;MACA,IAAI,CAACxG,cAAa,GAAI,KAAK;MAC3B,IAAI,CAACC,aAAY,GAAI,IAAI;MACzB,IAAI,CAACC,YAAW,GAAI,IAAI;MACxB,IAAI,CAACwG,UAAU,CAAC,CAAC;IACnB,CAAC;IAEDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAAC3G,cAAa,GAAI,KAAI;MAC1B,IAAI,CAACC,aAAY,GAAI,IAAG;IAC1B,CAAC;IAEG2G,iBAAiBA,CAACjD,KAAK,EAAEjD,MAAM,EAAE;MAC7B,MAAMqE,IAAG,GAAIpB,KAAK,CAACqB,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAI,CAACF,IAAI,EAAE;MAEX,MAAM8B,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAK,GAAKjC,CAAC,IAAK;QACnB,IAAI,CAAC7E,aAAY,GAAIS,MAAM;QAC3B,IAAI,CAACR,YAAW,GAAI4E,CAAC,CAACE,MAAM,CAACQ,MAAM;QACnC,IAAI,CAACxF,cAAa,GAAI,IAAI;MAC9B,CAAC;MACD6G,MAAM,CAACG,aAAa,CAACjC,IAAI,CAAC;IAC9B,CAAC;IACDkC,iBAAiBA,CAACvG,MAAM,EAAE;MACtB,IAAI,CAACL,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QAAER,IAAI,EAAEnB,MAAM,CAACmB,IAAI;QAAEwD,KAAK,EAAE;MAAK,CAAC,CAAC;MACxE,IAAI,CAAC1F,aAAY,GAAI,EAAE;IAC3B,CAAC;IACDuH,oBAAoBA,CAACxG,MAAM,EAAE;MACzB,IAAI,CAACL,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QAAER,IAAI,EAAEnB,MAAM,CAACmB,IAAI;QAAEsF,QAAQ,EAAE;MAAG,CAAC,CAAC;MACzE,IAAI,CAACxH,aAAY,GAAI,EAAE;IAC3B,CAAC;IACDyH,oBAAoBA,CAAC1G,MAAM,EAAE;MACzB,IAAI,CAACL,MAAM,CAACgC,QAAQ,CAAC,cAAc,EAAE;QACjCR,IAAI,EAAEnB,MAAM,CAACmB,IAAI;QACjBsF,QAAQ,EAAEzG,MAAM,CAACyG;MACrB,CAAC,CAAC;MACF,IAAI,CAACxH,aAAY,GAAI,EAAE;MACvB,IAAI,CAACC,YAAW,GAAI,EAAE;IAC1B,CAAC;IACDyH,cAAcA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACvH,WAAU,IAAK,IAAI,CAACD,YAAW,KAAM,IAAI,CAACC,WAAW,EAAE;QAC7D,IAAI,CAAC4G,UAAU,CAAC,CAAC;QACjB;MACJ;MACA,IAAI,CAACrG,MAAM,CAACgC,QAAQ,CAAC,kBAAkB,EAAE;QACrCiF,OAAO,EAAE,IAAI,CAACzH,YAAY;QAC1B0H,OAAO,EAAE,IAAI,CAACzH;MAClB,CAAC,CAAC;MACF,IAAI,CAAC4G,UAAU,CAAC,CAAC;IACrB,CAAC;IACDA,UAAUA,CAAA,EAAG;MACT,IAAI,CAAC/G,aAAY,GAAI,EAAE;MACvB,IAAI,CAACC,YAAW,GAAI,EAAE;MACtB,IAAI,CAACC,YAAW,GAAI,EAAE;MACtB,IAAI,CAACC,WAAU,GAAI,EAAE;IACzB;EACJ;AAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}