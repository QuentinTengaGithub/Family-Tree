{"ast":null,"code":"import { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"title\"\n}, \"Sign Up\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"form_input_container\"\n};\nconst _hoisted_4 = {\n  class: \"form_input\"\n};\nconst _hoisted_5 = {\n  class: \"form_input_container\"\n};\nconst _hoisted_6 = {\n  class: \"form_input\"\n};\nconst _hoisted_7 = {\n  class: \"form_input_container\"\n};\nconst _hoisted_8 = {\n  class: \"form_input\"\n};\nconst _hoisted_9 = {\n  class: \"form_input_container\"\n};\nconst _hoisted_10 = {\n  class: \"form_input\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"p\", null, [/*#__PURE__*/_createElementVNode(\"input\", {\n  class: \"button\",\n  type: \"submit\",\n  value: \"Create Account\"\n})], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.createAccount && $options.createAccount(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", {\n    class: _normalizeClass([\"form_text\", {\n      dark: $options.darkMode\n    }])\n  }, \"Name\", 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"padding-left\": \"10px\"\n    },\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n    class: _normalizeClass([\"form_input\", {\n      dark: $options.darkMode\n    }]),\n    placeholder: \"Enter name\"\n  }, null, 2 /* CLASS */), [[_vModelText, $data.name]])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"p\", {\n    class: _normalizeClass([\"form_text\", {\n      dark: $options.darkMode\n    }])\n  }, \"Email\", 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"padding-left\": \"10px\"\n    },\n    type: \"email\",\n    name: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.email = $event),\n    class: _normalizeClass([\"form_input\", {\n      dark: $options.darkMode\n    }]),\n    placeholder: \"Enter email adress\"\n  }, null, 2 /* CLASS */), [[_vModelText, $data.email]])])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", {\n    class: _normalizeClass([\"form_text\", {\n      dark: $options.darkMode\n    }])\n  }, \"Password\", 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"padding-left\": \"10px\"\n    },\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event),\n    class: _normalizeClass([\"form_input\", {\n      dark: $options.darkMode\n    }]),\n    placeholder: \"Enter password\"\n  }, null, 2 /* CLASS */), [[_vModelText, $data.password]])])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", {\n    class: _normalizeClass([\"form_text\", {\n      dark: $options.darkMode\n    }])\n  }, \"Confirm password\", 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    style: {\n      \"padding-left\": \"10px\"\n    },\n    type: \"password\",\n    name: \"confirmPassword\",\n    id: \"confirmPassword\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.confirmPassword = $event),\n    class: _normalizeClass([\"form_input\", {\n      dark: $options.darkMode\n    }]),\n    placeholder: \"Confirm password\"\n  }, null, 2 /* CLASS */), [[_vModelText, $data.confirmPassword]])])]), _hoisted_11, _createElementVNode(\"p\", {\n    class: \"redirect-text\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.changeTab('Sign-In'))\n  }, \"Already have an account ?\")], 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","value","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","createAccount","_hoisted_3","_normalizeClass","dark","darkMode","_hoisted_4","style","name","id","$data","$event","placeholder","_hoisted_5","_hoisted_6","email","_hoisted_7","_hoisted_8","password","_hoisted_9","_hoisted_10","confirmPassword","_hoisted_11","onClick","changeTab"],"sources":["/Users/quentin/Family-Tree/src/views/SignUp.vue"],"sourcesContent":["<template>\n    <div class=\"content\">\n        <p class=\"title\">Sign Up</p>\n        <form @submit.prevent=\"createAccount\">\n            <div class=\"form_input_container\">\n                <p class=\"form_text\" :class=\"{ dark: darkMode }\">Name</p>\n                <div class=\"form_input\">\n                    <input \n                        style=\"padding-left:10px\" \n                        type=\"text\" \n                        name=\"name\" \n                        id=\"name\" \n                        v-model=\"name\" \n                        class=\"form_input\"\n                        placeholder=\"Enter name\"\n                        :class=\"{ dark: darkMode }\"\n                    >\n                </div>\n            </div>\n            <div class=\"form_input_container\">\n                <p class=\"form_text\" :class=\"{ dark: darkMode }\">Email</p>\n                <div class=\"form_input\">\n                    <input \n                        style=\"padding-left:10px\" \n                        type=\"email\" \n                        name=\"email\" \n                        id=\"email\" \n                        v-model=\"email\" \n                        class=\"form_input\"\n                        placeholder=\"Enter email adress\"\n                        :class=\"{ dark: darkMode }\"\n                    >\n                </div>\n            </div>\n            <div class=\"form_input_container\">\n                <p class=\"form_text\" :class=\"{ dark: darkMode }\">Password</p>\n                <div class=\"form_input\">\n                    <input \n                        style=\"padding-left:10px\" \n                        type=\"password\" \n                        name=\"password\" \n                        id=\"password\" \n                        v-model=\"password\" \n                        class=\"form_input\"\n                        placeholder=\"Enter password\"\n                        :class=\"{ dark: darkMode }\"\n                    >\n                </div>\n            </div>\n            <div class=\"form_input_container\">\n                <p class=\"form_text\" :class=\"{ dark: darkMode }\">Confirm password</p>\n                <div class=\"form_input\">\n                    <input \n                        style=\"padding-left:10px\" \n                        type=\"password\" \n                        name=\"confirmPassword\" \n                        id=\"confirmPassword\" \n                        v-model=\"confirmPassword\" \n                        class=\"form_input\"\n                        placeholder=\"Confirm password\"\n                        :class=\"{ dark: darkMode }\"\n                    >\n                </div>\n            </div>\n            <p><input class=\"button\" type=\"submit\" value=\"Create Account\"></p>\n            <p class=\"redirect-text\" @click=\"changeTab('Sign-In')\">Already have an account ?</p>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { collection, doc, getDocs, query, setDoc, where } from \"firebase/firestore\";\nimport { db } from \"../firebaseConfig\";\n\nexport default {\n    data() {\n        return {\n            name: '',\n            email: '',\n            password: '',\n            confirmPassword: ''\n        }\n    },\n    methods: {\n        async createAccount() {\n            if (this.password !== this.confirmPassword) {\n                alert(\"Passwords do not match.\");\n                return;\n            }\n\n            // Check for name uniqueness with a query\n            const q = query(collection(db, \"users\"), where(\"name\", \"==\", this.name));\n            const querySnapshot = await getDocs(q);\n            if (!querySnapshot.empty) {\n                alert(\"This name is already taken. Please choose another one.\");\n                return;\n            }\n\n            const auth = getAuth();\n            createUserWithEmailAndPassword(auth, this.email, this.password)\n                .then((userCredential) => {\n                    const user = userCredential.user;\n                    // Revert to using user.uid as the document ID\n                    const userRef = doc(db, \"users\", user.uid);\n                    setDoc(userRef, {\n                        uid: user.uid,\n                        email: user.email,\n                        name: this.name,\n                        role: user.email === 'quentinritt94@gmail.com' ? 'admin' : 'user'\n                    });\n                    this.$router.push('/sign-in');\n                })\n                .catch(error => {\n                    alert(error.message);\n                });\n        },\n        changeTab(tab) {\n            this.$router.push('/' + tab.toLowerCase());\n        }\n    },\n    computed: {\n        darkMode() {\n            return this.$store.state.darkMode;\n        }\n    }\n}\n</script>\n\n<style>\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}