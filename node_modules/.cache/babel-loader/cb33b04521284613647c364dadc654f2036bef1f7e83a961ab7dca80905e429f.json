{"ast":null,"code":"export default {\n  data() {\n    return {\n      name: \"\",\n      birthday: \"\",\n      gender: \"\",\n      image: null,\n      errors: {\n        name: false,\n        birthday: false,\n        gender: false\n      }\n    };\n  },\n  computed: {\n    isFormValid() {\n      return this.name && this.age && this.gender && this.image;\n    },\n    darkMode() {\n      return this.$store.state.darkMode;\n    }\n  },\n  methods: {\n    createMember() {\n      this.errors = {\n        name: false,\n        birthday: false,\n        gender: false\n      };\n      if (!this.name) this.errors.name = true;\n      if (!this.gender) this.errors.gender = true;\n      if (this.errors.name || this.errors.birthday || this.errors.gender) {\n        return;\n      }\n      const name = this.name;\n      let image = this.image;\n      const gender = this.gender;\n      const birthday = this.birthday;\n      const today = new Date();\n      const birthDate = new Date(birthday);\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const m = today.getMonth() - birthDate.getMonth();\n      if (m < 0 || m === 0 && today.getDate() < birthDate.getDate()) {\n        age--;\n      }\n      if (!image) {\n        if (gender === \"male\") {\n          image = require(\"../assets/avatar_male.png\");\n        } else if (gender === \"female\") {\n          image = require(\"../assets/avatar_female.png\");\n        }\n      }\n      const newMember = {\n        name,\n        age,\n        image,\n        gender,\n        birthday,\n        x: 0,\n        y: 0\n      };\n      this.$store.dispatch('addMember', newMember);\n      this.name = \"\";\n      this.birthday = \"\";\n      this.image = null;\n      this.gender = \"\";\n      const inputImage = document.getElementById(\"image\");\n      if (inputImage) {\n        inputImage.value = \"\";\n      }\n    },\n    deleteMember(member) {\n      this.$store.dispatch('deleteMember', member.name);\n    },\n    handleImageUpload(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = e => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n          const ctx = canvas.getContext('2d');\n          const MAX_WIDTH = 300;\n          const MAX_HEIGHT = 300;\n          let width = img.width;\n          let height = img.height;\n          if (width > height) {\n            if (width > MAX_WIDTH) {\n              height *= MAX_WIDTH / width;\n              width = MAX_WIDTH;\n            }\n          } else {\n            if (height > MAX_HEIGHT) {\n              width *= MAX_HEIGHT / height;\n              height = MAX_HEIGHT;\n            }\n          }\n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0, width, height);\n          this.image = canvas.toDataURL('image/jpeg', 0.7);\n        };\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    getMemberPosition(member) {\n      const index = this.members.indexOf(member);\n      return {\n        x: (index + 1) * 200,\n        y: 100\n      };\n    }\n  }\n};","map":{"version":3,"names":["data","name","birthday","gender","image","errors","computed","isFormValid","age","darkMode","$store","state","methods","createMember","today","Date","birthDate","getFullYear","m","getMonth","getDate","require","newMember","x","y","dispatch","inputImage","document","getElementById","value","deleteMember","member","handleImageUpload","event","file","target","files","reader","FileReader","onload","e","img","Image","canvas","createElement","ctx","getContext","MAX_WIDTH","MAX_HEIGHT","width","height","drawImage","toDataURL","src","result","readAsDataURL","getMemberPosition","index","members","indexOf"],"sources":["/Users/quentin/Family-Tree/src/views/AddMember.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div v-if=\"showSuccessMessage\" class=\"success-message\">Member created</div>\n    <p class=\"title\">Add a member</p>\n    <form @submit.prevent=\"createMember\">\n      <div class=\"form_input_container\">\n        <p class=\"form_text\" :class=\"{ dark: darkMode }\">* Name</p>\n        <div class=\"form_input\">\n          <input \n            style=\"padding-left:10px\" \n            type=\"text\" \n            name=\"name\" \n            id=\"name\" \n            v-model=\"name\" \n            class=\"form_input\" \n            placeholder=\"Enter name\" \n            :class=\"{ invalid: errors.name, dark: darkMode }\">\n        </div>\n      </div>\n      <div class=\"form_input_container\">\n        <p class=\"form_text\" :class=\"{ dark: darkMode }\">* Birthday</p>\n        <div class=\"form_input\">\n          <input \n            style=\"padding-left:10px\" \n            type=\"date\" \n            name=\"birthday\" \n            id=\"birthday\" \n            v-model=\"birthday\" \n            class=\"form_input\"\n            :class=\"{ invalid: errors.birthday, dark: darkMode }\">\n          </div>\n      </div>\n      <div class=\"form_input_container\">\n        <p class=\"form_text\" :class=\"{ dark: darkMode }\">* Gender</p>\n        <div class=\"form_input\" style=\"\" :class=\"{ invalid: errors.gender }\">\n          <label style=\"margin-right:10px\"><input type=\"radio\" name=\"gender\" value=\"male\" v-model=\"gender\"> Male</label>\n          <label><input type=\"radio\" name=\"gender\" value=\"female\" v-model=\"gender\"> Female</label></div>\n        </div>\n        <div class=\"form_input_container\">\n          <p class=\"form_text\" :class=\"{ dark: darkMode }\">Photo</p><div class=\"form_input\"><input type=\"file\" name=\"image\" id=\"image\" @change=\"handleImageUpload\"></div>\n        </div>\n      <p><input class=\"button\" type=\"submit\" value=\"Create\"></p>\n    </form>\n\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      name: \"\",\n      birthday: \"\",\n      gender: \"\",\n      image: null,\n      \n      errors: { name: false, birthday: false, gender: false }\n    };\n  },\n  computed: {\n    isFormValid() {\n      return this.name && this.age && this.gender && this.image;\n    },\n    darkMode() {\n      return this.$store.state.darkMode;\n    }\n  },\n  methods: {\n\n    createMember() {\n      this.errors = { name: false, birthday: false, gender: false };\n\n      if (!this.name) this.errors.name = true;\n      if (!this.gender) this.errors.gender = true;\n\n      if (this.errors.name || this.errors.birthday || this.errors.gender) {\n        return;\n      }\n\n      const name = this.name;\n      let image = this.image;\n      const gender = this.gender;\n      const birthday = this.birthday;\n\n      const today = new Date();\n      const birthDate = new Date(birthday);\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const m = today.getMonth() - birthDate.getMonth();\n      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n      }\n\n      if (!image) {\n        if (gender === \"male\") {\n          image = require(\"../assets/avatar_male.png\"); \n        } else if (gender === \"female\") {\n          image = require(\"../assets/avatar_female.png\");\n        }\n      }\n\n      const newMember = { name, age, image, gender, birthday, x: 0, y: 0 };\n      this.$store.dispatch('addMember', newMember);\n\n      this.name = \"\";\n      this.birthday = \"\";\n      this.image = null;\n      this.gender = \"\";\n      const inputImage = document.getElementById(\"image\");\n      if (inputImage) {\n        inputImage.value = \"\";\n      }\n    },\n\n    deleteMember(member) {\n      this.$store.dispatch('deleteMember', member.name);\n    },\n    handleImageUpload(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n          const ctx = canvas.getContext('2d');\n\n          const MAX_WIDTH = 300;\n          const MAX_HEIGHT = 300;\n          let width = img.width;\n          let height = img.height;\n\n          if (width > height) {\n            if (width > MAX_WIDTH) {\n              height *= MAX_WIDTH / width;\n              width = MAX_WIDTH;\n            }\n          } else {\n            if (height > MAX_HEIGHT) {\n              width *= MAX_HEIGHT / height;\n              height = MAX_HEIGHT;\n            }\n          }\n\n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0, width, height);\n\n          this.image = canvas.toDataURL('image/jpeg', 0.7);\n        };\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    getMemberPosition(member) {\n      const index = this.members.indexOf(member);\n      return {\n        x: (index + 1) * 200,\n        y: 100 \n      };\n    }\n  }\n}\n</script>\n\n<style>\n.form_text {\n  width: 80px;\n  text-align: right;\n  margin-right: 15px;\n  padding-right: 15px;\n  border-right: 1px solid black;\n}\n\n.form_text.dark {\n  border-right: 1px solid white;\n}\n\n.content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.delete-member {\n  border: none;\n  padding: 10px;\n  border-radius: 12px;\n}\n\n.female {\n  background-color: pink;\n}\n\n.form_input {\n  height: 30px;\n  display: flex; \n  align-items: center;\n}\n\ninput.form_input {\n  width: 150px;\n}\n\ninput.form_input.dark {\n  background-color:black !important;\n  color:white;\n  border:none;\n}\n\n.form_input_container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.gender {\n  display: flex;\n  flex-direction: inline;\n  align-items: center;\n  margin: 0 auto 10px auto;\n  width: 5vw;\n}\n\n.gender button {\n  background-color: transparent;\n  width: fit-content;\n  border: none;\n  padding: 5%;\n}\n\n.gender img {\n  width: 20px;\n  height: 25px;\n}\n\n.form_input.invalid {\n  border: 2px solid red !important;\n}\n\n.male {\n  background-color: #87CEFA;\n}\n\n.members-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.member-gender {\n  width: 20vw;\n}\n\n.member-image {\n  width: 10vw;\n  border-radius: 20px;\n}\n\n.member-name {\n  font-weight: bold;\n  font-size: 20px;\n}\n\n.new-member {\n  display: inline-block;\n  margin-right: 10px;\n  border: solid 1px black;\n  width: fit-content;\n  padding: 2%;\n  border: solid 1px black;\n  border-radius: 20px;\n}\n\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.5s ease;\n}\n\n.list-enter-from,\n.list-leave-to {\n  opacity: 0;\n  transform: translateY(30px);\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}